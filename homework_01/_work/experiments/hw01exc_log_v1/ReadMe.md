logAnalyzer

Язык реализации
python 3.8

Описание
Создание отчета с анализом логов nginx.
Скрипт находит в заданной директории файл логов с максимальной датой в имени
файла и на его основании создает отчет. Отчет сохраняется как html файл
c именем report-%y.%m.%d.html (где %y.%m.%d - это дата из имени
проанализированного файла с логами) и содержит следующие поля:

url - URL, к которому выполнялся запрос;
count - сколько раз встречается URL в проанализированном файле лога;
count_perc - сколько раз встречается URL, в процентнах относительно общего
числа запросов;
time_sum - суммарный $request_time для данного URL'а, абсолютное значение;
time_perc - суммарный $request_time для данного URL'а, в процентах
относительно общего $request_time всех запросов;
time_avg - средний $request_time для данного URL'а;
time_max - максимальный $request_time для данного URL'а;
time_med - медиана $request_time для данного URL'а.


Использование
Работа скрипта может быть сконфигурирована с помощью файла конфигурации
'./config.json', в котором могут быть переопределены следующие параметры:

REPORT_SIZE - количество URL, которые будут выведены в отчет (список
сортируется по убыванию значений в поле time_sum);
REPORT_DIR - каталог, в который будут сохраняться отчеты
(по умолчанию './reports', будет создан, если не существует);
LOG_DIR - каталог, в котором будет выполняться поиск лог-файлов
(по умолчанию './log');
PARSING_ERROR_LIMIT - лимит ошибок парсинга записей файла логов (в процентах
от общего количества записей в файле логов), при превышении которого отчет не
будет создан (по умолчанию 20);
LOG_FILE_APP_PATH - путь к файлу, в который будут записан лог работы скрипта
(по умолчанию не задан, лог выводится в stdout);
TEMPLATE_REPORT_PATH - путь к файлу с шаблоном отчета (по умолчанию
./report_template.html).


Запуск с конфигурацией из файла по умолчанию (./config.json)

$ python log_analyzer.py



Запуск с конфигурацией из пользовательского файла
В случае необходимости при запуске можно указать собственный файл конфигурации.

$ python log_analyzer.py --config /user_path/user_config.json